!function(a){a.fn.miniTip=function(b){var c={title:"",content:!1,delay:300,anchor:"n",event:"hover",fadeIn:200,fadeOut:200,aHide:!0,maxW:"250px",offset:5,stemOff:0,doHide:!1,className:""},d=a.extend(c,b);a("#miniTip"+(d.className?"."+d.className:""))[0]||a("body").append('<div id="miniTip" class="'+d.className+'"><div id="miniTip_t"></div><div id="miniTip_c"></div><div id="miniTip_a"></div></div>');var e=a("#miniTip"),f=a("#miniTip_t"),g=a("#miniTip_c"),h=a("#miniTip_a");return d.doHide?(e.stop(!0,!0).fadeOut(d.fadeOut),!1):this.each(function(){var b=a(this),c=d.content?d.content:b.attr("title");if(""!=c&&"undefined"!=typeof c){window.delay=!1;var i=!1,j=!0;d.content||b.removeAttr("title"),"hover"==d.event?(b.hover(function(){e.removeAttr("click"),j=!0,k.call(this)},function(){j=!1,l()}),d.aHide||e.hover(function(){i=!0},function(){i=!1,setTimeout(function(){j||e.attr("click")||l()},20)})):"click"==d.event&&(d.aHide=!0,b.click(function(){return e.attr("click","t"),e.data("last_target")!==b?k.call(this):"none"==e.css("display")?k.call(this):l(),e.data("last_target",b),a("html").unbind("click").click(function(b){"block"!=e.css("display")||a(b.target).closest("#miniTip").length||(a("html").unbind("click"),l())}),!1}));var k=function(){function i(a,b){return a-b}d.show&&d.show.call(this,d),d.content&&""!=d.content&&(c=d.content),g.html(c),""!=d.title?f.html(d.title).show():f.hide(),d.render&&d.render(e),h.removeAttr("class"),e.hide().width("").width(e.width()).css("max-width",d.maxW);var j=b.is("area");if(j){var k,l=[],m=[],n=b.attr("coords").split(",");for(k=0;k<n.length;k++)l.push(n[k++]),m.push(n[k]);var o=b.parent().attr("name"),p=a("img[usemap=\\#"+o+"]").offset(),q=parseInt(p.left,10)+parseInt((parseInt(l.sort(i)[0],10)+parseInt(l.sort(i)[l.length-1],10))/2,10),r=parseInt(p.top,10)+parseInt((parseInt(m.sort(i)[0],10)+parseInt(m.sort(i)[m.length-1],10))/2,10)}else var r=parseInt(b.offset().top,10),q=parseInt(b.offset().left,10);var s=j?0:parseInt(b.outerWidth(),10),t=j?0:parseInt(b.outerHeight(),10),u=e.outerWidth(),v=e.outerHeight(),w=Math.round(q+Math.round((s-u)/2)),x=Math.round(r+t+d.offset+8),y=Math.round(u-16)/2-parseInt(e.css("borderLeftWidth"),10),z=0,A=q+s+u+d.offset+8>parseInt(a(window).width(),10),B=u+d.offset+8>q,C=v+d.offset+8>r-a(window).scrollTop(),D=r+t+v+d.offset+8>parseInt(a(window).height()+a(window).scrollTop(),10),E=d.anchor;B||"e"==d.anchor&&!A?("w"==d.anchor||"e"==d.anchor)&&(E="e",z=Math.round(v/2-8-parseInt(e.css("borderRightWidth"),10)),y=-8-parseInt(e.css("borderRightWidth"),10),w=q+s+d.offset+8,x=Math.round(r+t/2-v/2)):(A||"w"==d.anchor&&!B)&&("w"==d.anchor||"e"==d.anchor)&&(E="w",z=Math.round(v/2-8-parseInt(e.css("borderLeftWidth"),10)),y=u-parseInt(e.css("borderLeftWidth"),10),w=q-u-d.offset-8,x=Math.round(r+t/2-v/2)),D||"n"==d.anchor&&!C?("n"==d.anchor||"s"==d.anchor)&&(E="n",z=v-parseInt(e.css("borderTopWidth"),10),x=r-(v+d.offset+8)):(C||"s"==d.anchor&&!D)&&("n"==d.anchor||"s"==d.anchor)&&(E="s",z=-8-parseInt(e.css("borderBottomWidth"),10),x=r+t+d.offset+8),"n"==d.anchor||"s"==d.anchor?u/2>q?(w=0>w?y+w:y,y=0):q+u/2>parseInt(a(window).width(),10)&&(w-=y,y*=2):C?(x+=z,z=0):D&&(x-=z,z*=2),h.css({"margin-left":(y>0?y:y+parseInt(d.stemOff,10)/2)+"px","margin-top":z+"px"}).attr("class",E),delay&&clearTimeout(delay),delay=setTimeout(function(){e.css({"margin-left":w+"px","margin-top":x+"px"}).stop(!0,!0).fadeIn(d.fadeIn)},d.delay)},l=function(){(!d.aHide&&!i||d.aHide)&&(delay&&clearTimeout(delay),delay=setTimeout(function(){m()},d.delay))},m=function(){!d.aHide&&!i||d.aHide?(e.stop(!0,!0).fadeOut(d.fadeOut),d.hide&&d.hide.call(this)):setTimeout(function(){l()},200)}}})}}(jQuery);