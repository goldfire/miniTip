/*!
 * miniTip v1.2.2
 *
 * Updated: July 23, 2011
 * Requires: jQuery v1.3+
 *
 * (c) 2011, James Simpson
 * http://goldfirestudios.com
 *
 * Dual licensed under the MIT and GPL
 *
 * Documentation found at:
 * http://goldfirestudios.com/blog/81/miniTip-jQuery-Plugin
*/
(function(a){a.fn.miniTip=function(f){var i={title:"",content:false,delay:300,anchor:"n",event:"hover",fadeIn:200,fadeOut:200,aHide:true,maxW:"250px",offset:5},h=a.extend(i,f);if(a("#miniTip").length<=0){a("body").append('<div id="miniTip" style="max-width:'+h.maxW+';"><div id="miniTip_t"></div><div id="miniTip_c"></div><div id="miniTip_a"></div></div>')}var e=a("#miniTip"),g=a("#miniTip_t"),b=a("#miniTip_c"),c=a("#miniTip_a");return this.each(function(){var m=a(this);var d=h.content?h.content:m.attr("title");if(d!=""){window.delay=false;var n=false,o=true;if(!h.content){m.removeAttr("title")}if(h.event=="hover"){m.hover(function(){e.removeAttr("click");o=true;j()},function(){o=false;k()});if(!h.aHide){e.hover(function(){n=true},function(){n=false;setTimeout(function(){if(!o&&!e.attr("click")){k()}},200)})}}else{if(h.event=="click"){h.aHide=true;m.click(function(){e.attr("click","t");if(e.css("display")=="none"){j()}else{k()}return false});a("html").click(function(p){if(e.css("display")=="block"&&a.inArray(p.target.id,["miniTip","miniTip_c","miniTip_a","miniTip_t"])<0){k()}})}}var j=function(){if(h.show){h.show.call(this)}b.html(d);if(h.title!=""){g.html(h.title).show()}else{g.hide()}c.removeAttr("class");e.hide().width("").width(e.width());var D=parseInt(m.offset().top,10),s=parseInt(m.offset().left,10),B=parseInt(m.outerWidth(),10),t=parseInt(m.outerHeight(),10),F=e.outerWidth(),z=e.outerHeight(),G=Math.round((B-F)/2),A=Math.round((t-z)/2),q=Math.round(s+G),u=Math.round(D+t+h.offset+8),r=(Math.round(F-16)/2)-parseInt(e.css("borderLeftWidth"),10),y=0,p=(s+B+F+h.offset+8)>parseInt(a(window).width(),10),v=(F+h.offset+8)>s,C=(z+h.offset+8)>D-a(window).scrollTop(),x=(D+t+z+h.offset+8)>parseInt(a(window).height()+a(window).scrollTop(),10),E=h.anchor;if(v||h.anchor=="e"&&!p){if(h.anchor=="w"||h.anchor=="e"){E="e";y=Math.round((z/2)-8-parseInt(e.css("borderRightWidth"),10));r=-8-parseInt(e.css("borderRightWidth"),10);q=s+B+h.offset+8;u=Math.round((D+t/2)-(z/2))}}else{if(p||h.anchor=="w"&&!v){if(h.anchor=="w"||h.anchor=="e"){E="w";y=Math.round((z/2)-8-parseInt(e.css("borderLeftWidth"),10));r=F-parseInt(e.css("borderLeftWidth"),10);q=s-F-h.offset-8;u=Math.round((D+t/2)-(z/2))}}}if(x||h.anchor=="n"&&!C){if(h.anchor=="n"||h.anchor=="s"){E="n";y=z-parseInt(e.css("borderTopWidth"),10);u=D-(z+h.offset+8)}}else{if(C||h.anchor=="s"&&!x){if(h.anchor=="n"||h.anchor=="s"){E="s";y=-8-parseInt(e.css("borderBottomWidth"),10);u=D+t+h.offset+8}}}c.css({"margin-left":r+"px","margin-top":y+"px"}).attr("class",E);if(delay){clearTimeout(delay)}delay=setTimeout(function(){e.css({"margin-left":q+"px","margin-top":u+"px"}).stop(true,true).fadeIn(h.fadeIn)},h.delay)};var k=function(){if(!h.aHide&&!n||h.aHide){if(delay){clearTimeout(delay)}delay=setTimeout(function(){l()},h.delay)}};var l=function(){if(!h.aHide&&!n||h.aHide){e.stop(true,true).fadeOut(h.fadeOut);if(h.hide){h.hide.call(this)}}else{setTimeout(function(){k()},200)}}}})}})(jQuery);