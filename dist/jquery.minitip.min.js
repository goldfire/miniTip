!function(t){t.fn.miniTip=function(e){var i={title:"",content:!1,delay:300,anchor:"n",event:"hover",fadeIn:200,fadeOut:200,aHide:!0,maxW:"250px",offset:5,stemOff:0,doHide:!1,"class":!1},a=t.extend(i,e);t("#miniTip")[0]||t("body").append('<div id="miniTip"><div id="miniTip_t"></div><div id="miniTip_c"></div><div id="miniTip_a"></div></div>');var n=t("#miniTip"),r=t("#miniTip_t"),o=t("#miniTip_c"),d=t("#miniTip_a");return a.doHide?(n.stop(!0,!0).fadeOut(a.fadeOut),!1):this.each(function(){var e=t(this);a.title=e.attr("data-minitip-title")||a.title,a.content=e.attr("data-minitip-content")||a.content,a.delay=1*e.attr("data-minitip-delay")||a.delay,a.anchor=e.attr("data-minitip-anchor")||a.anchor,a.event=e.attr("data-minitip-event")||a.event,a.fadeIn=1*e.attr("data-minitip-fadeIn")||a.fadeIn,a.fadeOut=1*e.attr("data-minitip-fadeOut")||a.fadeOut,a.aHide=e.attr("data-minitip-aHide")||a.aHide,a.maxW=e.attr("data-minitip-maxW")||a.maxW,a.offset=1*e.attr("data-minitip-offset")||a.offset,a.stemOff=1*e.attr("data-minitip-stemOff")||a.stemOff,a.doHide=e.attr("data-minitip-doHide")||a.doHide,a["class"]=e.attr("data-minitip-class")||a["class"];var i=a.content?a.content:e.attr("title");if(""!=i&&"undefined"!=typeof i){window.delay=!1;var s=!1,c=!0;a.content||e.removeAttr("title"),"hover"==a.event?(e.hover(function(){n.removeAttr("click"),c=!0,f.call(this)},function(){c=!1,h()}),a.aHide||n.hover(function(){s=!0},function(){s=!1,setTimeout(function(){c||n.attr("click")||h()},20)})):"click"==a.event&&(a.aHide=!0,e.click(function(){return n.attr("click","t"),n.data("last_target")!==e?f.call(this):"none"==n.css("display")?f.call(this):h(),n.data("last_target",e),t("html").unbind("click").click(function(e){"block"!=n.css("display")||t(e.target).closest("#miniTip").length||(t("html").unbind("click"),h())}),!1}));var f=function(){function s(t,e){return t-e}a.show&&a.show.call(this,a),a.content&&""!=a.content&&(i=a.content),o.html(i),""!=a.title?r.html(a.title).show():r.hide(),a.render&&a.render(n),d.removeAttr("class"),n.hide().width("").width(n.width()).css("max-width",a.maxW);var c=e.is("area");if(c){var f,h=[],l=[],p=e.attr("coords").split(",");for(f=0;f<p.length;f++)h.push(p[f++]),l.push(p[f]);var m=e.parent().attr("name"),u=t("img[usemap=\\#"+m+"]").offset(),v=parseInt(u.left,10)+parseInt((parseInt(h.sort(s)[0],10)+parseInt(h.sort(s)[h.length-1],10))/2,10),I=parseInt(u.top,10)+parseInt((parseInt(l.sort(s)[0],10)+parseInt(l.sort(s)[l.length-1],10))/2,10)}else var I=parseInt(e.offset().top,10),v=parseInt(e.offset().left,10);var w=c?0:parseInt(e.outerWidth(),10),T=c?0:parseInt(e.outerHeight(),10),y=n.outerWidth(),g=n.outerHeight(),H=Math.round(v+Math.round((w-y)/2)),W=Math.round(I+T+a.offset+8),O=Math.round(y-16)/2-parseInt(n.css("borderLeftWidth"),10),x=0,b=v+w+y+a.offset+8>parseInt(t(window).width(),10),k=y+a.offset+8>v,M=g+a.offset+8>I-t(window).scrollTop(),_=I+T+g+a.offset+8>parseInt(t(window).height()+t(window).scrollTop(),10),A=a.anchor;k||"e"==a.anchor&&!b?("w"==a.anchor||"e"==a.anchor)&&(A="e",x=Math.round(g/2-8-parseInt(n.css("borderRightWidth"),10)),O=-8-parseInt(n.css("borderRightWidth"),10),H=v+w+a.offset+8,W=Math.round(I+T/2-g/2)):(b||"w"==a.anchor&&!k)&&("w"==a.anchor||"e"==a.anchor)&&(A="w",x=Math.round(g/2-8-parseInt(n.css("borderLeftWidth"),10)),O=y-parseInt(n.css("borderLeftWidth"),10),H=v-y-a.offset-8,W=Math.round(I+T/2-g/2)),_||"n"==a.anchor&&!M?("n"==a.anchor||"s"==a.anchor)&&(A="n",x=g-parseInt(n.css("borderTopWidth"),10),W=I-(g+a.offset+8)):(M||"s"==a.anchor&&!_)&&("n"==a.anchor||"s"==a.anchor)&&(A="s",x=-8-parseInt(n.css("borderBottomWidth"),10),W=I+T+a.offset+8),"n"==a.anchor||"s"==a.anchor?y/2>v?(H=0>H?O+H:O,O=0):v+y/2>parseInt(t(window).width(),10)&&(H-=O,O*=2):M?(W+=x,x=0):_&&(W-=x,x*=2),d.css({"margin-left":(O>0?O:O+parseInt(a.stemOff,10)/2)+"px","margin-top":x+"px"}).attr("class",A),delay&&clearTimeout(delay),delay=setTimeout(function(){n.css({"margin-left":H+"px","margin-top":W+"px"}).stop(!0,!0).fadeIn(a.fadeIn)},a.delay),t("#miniTip").attr("class",a["class"]||"")},h=function(){(!a.aHide&&!s||a.aHide)&&(delay&&clearTimeout(delay),delay=setTimeout(function(){l()},a.delay))},l=function(){!a.aHide&&!s||a.aHide?(n.stop(!0,!0).fadeOut(a.fadeOut),a.hide&&a.hide.call(this)):setTimeout(function(){h()},200)}}})}}(jQuery);